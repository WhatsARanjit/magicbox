<script>
  function test() {
    data = '{ \
      "lang": "' + $('#lang').val() + '", \
      "code": "' + escape($('#magic-box').val()) + '" \
    }'
    submitcode('validate', data);
  }
</script>

<form id='magic' action='#'>
  <div class='form-group'>
    <label for='magic-box'>Enter code:</label>
    <samp><textarea class='form-control' id='magic-box' rows='5'></textarea></samp>
  </div>
  <div class='form-inline'>
    <label for='lang'>Language:</label>
    <select class='custom-select' id='lang'>
      <option value='puppet' selected>puppet</option>
      <option value='ruby'>ruby</option>
      <option value='yaml'>yaml</option>
      <option value='json'>json</option>
    </select>
  </div>
</form>
  <p>
    <button onclick='test();' class='btn btn-warning'>
      Test
    </button>
  </p>
<form id='status_output' hidden>
  <div class='form-inline'>
    <label for='output'>Status:</label> <span id='status'>success</span>
  </div>
  <div class='form-group' id='samp_output'>
    <samp><textarea class='form-control' id='output' rows='5' readonly></textarea></samp>
  </div>
</form>
