<script>
function test() {
  data = '{ \
    "function": "magic_template", \
    "code": "Puppet%3A%3AParser%3A%3AFunctions%3A%3Anewfunction%28%0A%20%20%3Amagic_template%2C%0A%20%20%3Atype%20%3D%3E%20%3Arvalue%0A%29%20do%20%7Cargs%7C%0A%20%20function_inline_template%28args%5B0%5D%29%0Aend", \
    "value": "' + escape("'test string'") + '", \
    "args": "' + escape($('#magic-box').val()) + '" \
  }';
  submitcode('function', data)
}
</script>

<form id='magic' action='#'>
  <div class='form-group'>
    <label for='magic-box'>Enter template code:</label>
    <quote>Create a, ERB template that prints <code>test string</code> on a single line</quote>
    <samp><textarea class='form-control' id='magic-box' rows='10'></textarea></samp>
  </div>
</form>
  <p><button onclick='test();' class='btn btn-warning'>Test</button></p>
<form id='status_output' hidden>
  <div class='form-inline'>
    <label for='output'>Status:</label> <span id='status'>success</span>
  </div>
  <div class='form-group' id='samp_output'>
    <samp><textarea class='form-control' id='output' rows='5' readonly></textarea></samp>
  </div>
</form>
